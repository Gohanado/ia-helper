<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>IA Helper - Options</title>
  <link rel="stylesheet" href="options.css">
</head>
<body>
  <div class="options-container">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <img src="../../assets/icons/icon48.png" alt="IA Helper" class="sidebar-logo">
        <h1>IA Helper</h1>
        <span class="version" id="current-version">v1.1.0</span>
      </div>

      <!-- Notification mise a jour -->
      <div class="update-banner" id="update-banner" style="display: none;">
        <div class="update-icon">!</div>
        <div class="update-text">
          <strong data-i18n="updateAvailable">Mise a jour disponible</strong>
          <span id="update-version">v1.2.0</span>
        </div>
        <a href="#" id="update-link" target="_blank" class="update-btn" data-i18n="download">Telecharger</a>
      </div>

      <nav class="sidebar-nav">
        <button class="nav-item active" data-section="connection">
          <span class="nav-icon">S</span>
          <span data-i18n="connection">Connexion</span>
        </button>
        <button class="nav-item" data-section="presets">
          <span class="nav-icon">P</span>
          <span data-i18n="presets">Actions</span>
        </button>
        <button class="nav-item" data-section="shortcuts">
          <span class="nav-icon">K</span>
          <span data-i18n="shortcuts">Raccourcis</span>
        </button>
        <button class="nav-item" data-section="about">
          <span class="nav-icon">i</span>
          <span data-i18n="about">A propos</span>
        </button>
      </nav>

      <!-- Quick actions sidebar -->
      <div class="sidebar-footer">
        <a href="https://github.com/Gohanado/ia-helper/blob/main/docs/README.md" target="_blank" class="sidebar-link">
          <span class="link-icon">?</span>
          <span data-i18n="documentation">Documentation</span>
        </a>
        <a href="https://github.com/Gohanado/ia-helper/issues/new?template=bug_report.md" target="_blank" class="sidebar-link">
          <span class="link-icon">!</span>
          <span data-i18n="reportBug">Signaler un bug</span>
        </a>
        <a href="https://github.com/Gohanado/ia-helper/issues/new?template=feature_request.md" target="_blank" class="sidebar-link">
          <span class="link-icon">+</span>
          <span data-i18n="requestFeature">Suggerer une feature</span>
        </a>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Section Connexion -->
      <section class="section active" id="section-connection">
        <h2 data-i18n="serverConfig">Configuration du serveur</h2>

        <div class="form-group">
          <label for="provider-select" data-i18n="iaProvider">Fournisseur IA</label>
          <select id="provider-select">
            <option value="ollama">Ollama (local)</option>
            <option value="openai">OpenAI</option>
            <option value="anthropic">Anthropic (Claude)</option>
            <option value="groq">Groq</option>
            <option value="openrouter">OpenRouter</option>
            <option value="custom">Custom (OpenAI compatible)</option>
          </select>
        </div>

        <div class="form-group" id="api-url-group">
          <label for="api-url" id="api-url-label" data-i18n="serverUrl">URL du serveur Ollama</label>
          <div class="input-with-btn">
            <input type="text" id="api-url" placeholder="http://localhost:11434">
            <button id="btn-test-connection" class="btn btn-secondary" data-i18n="testConnection">Tester</button>
          </div>
          <div class="connection-status" id="connection-status"></div>
        </div>

        <div class="form-group" id="api-key-group" style="display: none;">
          <label for="api-key" data-i18n="apiKey">Cle API</label>
          <input type="password" id="api-key" placeholder="sk-...">
          <p class="form-hint" data-i18n="apiKeyHint">Votre cle API est stockee localement et jamais partagee.</p>
        </div>

        <div class="form-group">
          <label for="model-select" data-i18n="model">Modele</label>
          <div class="input-with-btn">
            <select id="model-select">
              <option value="" data-i18n="selectModel">Selectionnez un modele</option>
            </select>
            <button id="btn-refresh-models" class="btn btn-secondary" data-i18n="refreshModels">Actualiser</button>
          </div>
        </div>

        <div class="form-group">
          <label class="toggle-label">
            <input type="checkbox" id="streaming-enabled" checked>
            <span class="toggle-switch"></span>
            <span class="toggle-text" data-i18n="enableStreaming">Activer le streaming (reponse en temps reel)</span>
          </label>
        </div>

        <div class="form-group">
          <label class="toggle-label">
            <input type="checkbox" id="inline-popup-enabled" checked>
            <span class="toggle-switch"></span>
            <span class="toggle-text" data-i18n="inlinePopup">Afficher les reponses dans un popup</span>
          </label>
          <p class="form-hint" data-i18n="inlinePopupHint">Si active, les reponses du prompt rapide s'affichent dans une popup flottante avec streaming.</p>
        </div>

        <div class="form-group">
          <label for="interface-language" data-i18n="interfaceLanguage">Langue de l'interface</label>
          <select id="interface-language">
            <option value="fr">FR Francais</option>
            <option value="en">GB English</option>
            <option value="es">ES Espanol</option>
            <option value="it">IT Italiano</option>
            <option value="pt">PT Portugues</option>
          </select>
        </div>

        <div class="form-group">
          <label for="response-language" data-i18n="responseLanguage">Langue de reponse de l'IA (generale)</label>
          <select id="response-language">
            <option value="auto" data-i18n="auto">Automatique (selon le texte)</option>
            <option value="fr">Francais</option>
            <option value="en">English</option>
            <option value="es">Espanol</option>
            <option value="it">Italiano</option>
            <option value="pt">Portugues</option>
          </select>
          <p class="form-hint" data-i18n="responseLanguageHint">Cette option ne s'applique pas aux traductions specifiques.</p>
        </div>

        <div class="form-actions">
          <button id="btn-save-connection" class="btn btn-primary" data-i18n="save">Sauvegarder</button>
        </div>
      </section>

      <!-- Section Actions -->
      <section class="section" id="section-presets">
        <h2 data-i18n="contextMenuActions">Actions du menu contextuel</h2>
        <p class="section-desc" data-i18n="contextMenuActionsDesc">Choisissez les actions disponibles dans le menu clic-droit. Activez ou desactivez chaque fonction individuellement.</p>

        <!-- Actions Personnalisees - EN HAUT -->
        <div class="actions-category">
          <h3 class="category-title" data-i18n="myCustomActions">Mes actions personnalisees</h3>
          <p class="category-desc" data-i18n="myCustomActionsDesc">Creez vos propres actions avec des prompts personnalises</p>
          <div class="actions-grid" id="actions-custom">
            <!-- Genere par JS -->
          </div>
          <button id="btn-add-custom-action" class="btn btn-primary" style="margin-top: 16px;" data-i18n="addCustomActionBtn">+ Ajouter une action</button>
        </div>

        <!-- Actions Essentielles -->
        <div class="actions-category">
          <h3 class="category-title" data-i18n="essentials">Essentiels</h3>
          <p class="category-desc" data-i18n="essentialsDesc">Actions de base recommandees pour tous</p>
          <div class="actions-grid" id="actions-essential">
            <!-- Genere par JS -->
          </div>
        </div>

        <!-- Actions Pratiques -->
        <div class="actions-category">
          <h3 class="category-title" data-i18n="practical">Pratiques</h3>
          <p class="category-desc" data-i18n="practicalDesc">Actions utiles au quotidien</p>
          <div class="actions-grid" id="actions-practical">
            <!-- Genere par JS -->
          </div>
        </div>

        <!-- Actions Techniques -->
        <div class="actions-category">
          <h3 class="category-title" data-i18n="technical">Techniques</h3>
          <p class="category-desc" data-i18n="technicalDesc">Pour developpeurs et techniques</p>
          <div class="actions-grid" id="actions-technical">
            <!-- Genere par JS -->
          </div>
        </div>

        <!-- Actions Analyse -->
        <div class="actions-category">
          <h3 class="category-title" data-i18n="analysis">Analyse</h3>
          <p class="category-desc" data-i18n="analysisDesc">Analyse et comprehension de texte</p>
          <div class="actions-grid" id="actions-analysis">
            <!-- Genere par JS -->
          </div>
        </div>

        <!-- Traduction -->
        <div class="actions-category">
          <h3 class="category-title" data-i18n="translation">Traduction</h3>
          <p class="category-desc" data-i18n="translationDesc">Langues disponibles pour la traduction rapide</p>
          <div class="actions-grid" id="actions-translate">
            <!-- Genere par JS -->
          </div>
        </div>

        <div class="form-actions" style="margin-top: 24px;">
          <button id="btn-enable-all" class="btn btn-secondary" data-i18n="enableAll">Tout activer</button>
          <button id="btn-disable-all" class="btn btn-secondary" data-i18n="disableAll">Tout desactiver</button>
          <button id="btn-reset-actions" class="btn btn-secondary" data-i18n="defaultValues">Valeurs par defaut</button>
        </div>
      </section>

      <!-- Section Raccourcis -->
      <section class="section" id="section-shortcuts">
        <h2 data-i18n="keyboardShortcuts">Raccourcis clavier</h2>
        <p class="section-desc" data-i18n="keyboardShortcutsDesc">Configurez les raccourcis clavier pour acceder rapidement aux actions. Cliquez sur un raccourci pour le modifier.</p>

        <div class="form-group shortcut-options">
          <label class="toggle-label">
            <input type="checkbox" id="shortcuts-enabled" checked>
            <span class="toggle-switch"></span>
            <span class="toggle-text" data-i18n="shortcutsEnabled">Activer les raccourcis clavier</span>
          </label>
        </div>

        <div class="form-group">
          <label for="default-translate-lang" data-i18n="defaultTranslateLang">Langue de traduction par defaut</label>
          <select id="default-translate-lang">
            <option value="en">English</option>
            <option value="fr">Francais</option>
            <option value="es">Espanol</option>
            <option value="de">Deutsch</option>
            <option value="it">Italiano</option>
            <option value="pt">Portugues</option>
            <option value="zh">Chinese</option>
            <option value="ja">Japanese</option>
            <option value="ko">Korean</option>
            <option value="ar">Arabic</option>
            <option value="ru">Russian</option>
          </select>
        </div>

        <h3 style="margin-top: 24px;" data-i18n="configuredShortcuts">Raccourcis configures</h3>
        <div class="shortcuts-list" id="shortcuts-list">
          <!-- Genere par JS -->
        </div>

        <button id="btn-add-shortcut" class="btn btn-secondary" style="margin-top: 16px;" data-i18n="addShortcutBtn">+ Ajouter un raccourci</button>

        <div class="form-actions">
          <button id="btn-save-shortcuts" class="btn btn-primary" data-i18n="save">Sauvegarder</button>
        </div>

        <div class="shortcut-help">
          <h4 data-i18n="howToChange">Comment modifier un raccourci</h4>
          <p data-i18n="howToChangeDesc">Cliquez sur le bouton du raccourci, puis appuyez sur la nouvelle combinaison de touches (ex: Ctrl+Shift+K). Utilisez Alt, Ctrl ou Shift + une lettre.</p>
        </div>
      </section>

      <!-- Section A propos -->
      <section class="section" id="section-about">
        <h2 data-i18n="aboutTitle">A propos de IA Helper</h2>

        <div class="about-hero">
          <img src="../../assets/icons/icon128.png" alt="IA Helper" class="about-logo">
          <div class="about-hero-text">
            <h3>IA Helper</h3>
            <p class="about-version" id="about-version">Version 1.1.0</p>
            <p class="about-tagline" data-i18n="description">Assistant IA intelligent pour Chrome</p>
          </div>
        </div>

        <div class="about-cards">
          <!-- Mise a jour -->
          <div class="about-card" id="update-card">
            <div class="about-card-icon">!</div>
            <div class="about-card-content">
              <h4 data-i18n="updates">Mises a jour</h4>
              <p id="update-status" data-i18n="checking">Verification...</p>
              <button id="btn-check-update" class="btn btn-secondary btn-sm" data-i18n="checkNow">Verifier maintenant</button>
            </div>
          </div>

          <!-- Changelog -->
          <div class="about-card">
            <div class="about-card-icon">*</div>
            <div class="about-card-content">
              <h4 data-i18n="changelog">Changelog</h4>
              <p data-i18n="changelogDesc">Voir les nouveautes de cette version</p>
              <a href="https://github.com/Gohanado/ia-helper/blob/main/CHANGELOG.md" target="_blank" class="btn btn-secondary btn-sm" data-i18n="viewChangelog">Voir le changelog</a>
            </div>
          </div>

          <!-- Documentation -->
          <div class="about-card">
            <div class="about-card-icon">?</div>
            <div class="about-card-content">
              <h4 data-i18n="documentation">Documentation</h4>
              <p data-i18n="documentationDesc">Guide d'installation et d'utilisation</p>
              <a href="https://github.com/Gohanado/ia-helper/blob/main/docs/README.md" target="_blank" class="btn btn-secondary btn-sm" data-i18n="readDoc">Lire la doc</a>
            </div>
          </div>
        </div>

        <div class="about-section">
          <h4 data-i18n="reportProblem">Signaler un probleme</h4>
          <div class="about-buttons">
            <a href="https://github.com/Gohanado/ia-helper/issues/new?template=bug_report.md" target="_blank" class="btn btn-secondary">
              <span class="btn-icon">!</span> <span data-i18n="reportBug">Signaler un bug</span>
            </a>
            <a href="https://github.com/Gohanado/ia-helper/issues/new?template=feature_request.md" target="_blank" class="btn btn-secondary">
              <span class="btn-icon">+</span> <span data-i18n="requestFeature">Suggerer une feature</span>
            </a>
          </div>
        </div>

        <div class="about-section about-credits">
          <h4 data-i18n="credits">Credits</h4>
          <p><strong data-i18n="developer">Developpeur:</strong> Gohanado</p>
          <p><strong data-i18n="contact">Contact:</strong> contact@badom.ch</p>
          <p><strong>GitHub:</strong> <a href="https://github.com/Gohanado/ia-helper" target="_blank">github.com/Gohanado/ia-helper</a></p>
          <p><strong data-i18n="license">Licence:</strong> Source-Available (<span data-i18n="freePersonalUse">usage personnel gratuit</span>)</p>
        </div>

        <div class="about-section">
          <h4 data-i18n="resetSection">Reinitialisation</h4>
          <p class="text-muted" data-i18n="resetWarning">Restaurer tous les parametres par defaut. Cette action est irreversible.</p>
          <button id="btn-reset" class="btn btn-danger" data-i18n="resetOptions">Reinitialiser les options</button>
        </div>
      </section>
    </main>
  </div>

  <!-- Modal Ajouter Action/Preset -->
  <div class="modal-overlay" id="modal-overlay">
    <div class="modal" id="modal-add-action">
      <div class="modal-header">
        <h3 class="modal-title" data-i18n="newAction">Nouvelle action</h3>
        <button class="modal-close" id="modal-close">&times;</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label for="custom-action-name" data-i18n="name">Nom</label>
          <input type="text" id="custom-action-name" data-i18n-placeholder="actionNamePlaceholder" placeholder="Ex: Reformuler en poesie">
        </div>
        <div class="form-group">
          <label for="custom-action-context" data-i18n="context">Contexte</label>
          <select id="custom-action-context">
            <option value="selection" data-i18n="textSelection">Selection de texte</option>
            <option value="input" data-i18n="inputField">Champs de saisie</option>
            <option value="page" data-i18n="fullPage">Page entiere</option>
            <option value="both" data-i18n="all">Tous</option>
          </select>
        </div>
        <div class="form-group">
          <label for="custom-action-prompt" data-i18n="systemPrompt">Prompt systeme</label>
          <textarea id="custom-action-prompt" rows="6" data-i18n-placeholder="promptPlaceholder" placeholder="Instructions pour l'IA..."></textarea>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="modal-cancel" data-i18n="cancel">Annuler</button>
        <button class="btn btn-primary" id="modal-save" data-i18n="save">Sauvegarder</button>
      </div>
    </div>
  </div>

  <!-- Modal Creer Preset -->
  <div class="modal-overlay" id="modal-preset-overlay">
    <div class="modal modal-large" id="modal-add-preset">
      <div class="modal-header">
        <h3 class="modal-title" data-i18n="newPreset">Creer un preset</h3>
        <button class="modal-close" id="modal-preset-close">&times;</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label for="preset-name" data-i18n="presetName">Nom du preset</label>
          <input type="text" id="preset-name" data-i18n-placeholder="presetNameExample" placeholder="Ex: Mon workflow">
          <p class="form-hint" data-i18n="presetNameHint">Ce nom apparaitra dans le menu contextuel</p>
        </div>
        <div class="form-group">
          <label for="preset-description" data-i18n="presetDescription">Description</label>
          <input type="text" id="preset-description" data-i18n-placeholder="shortDescription" placeholder="Description courte">
        </div>
        <div class="preset-actions-editor">
          <div class="preset-actions-header">
            <label data-i18n="presetActionsLabel">Actions du preset</label>
            <button class="btn btn-secondary btn-sm" id="btn-add-preset-action" data-i18n="addAction">+ Ajouter action</button>
          </div>
          <div class="preset-actions-items" id="preset-actions-items">
            <p class="empty-state" data-i18n="noActions">Aucune action. Cliquez sur "+ Ajouter action".</p>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="modal-preset-cancel" data-i18n="cancel">Annuler</button>
        <button class="btn btn-primary" id="modal-preset-save" data-i18n="createThePreset">Creer le preset</button>
      </div>
    </div>
  </div>

  <script src="options.js" type="module"></script>
</body>
</html>

